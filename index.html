<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Audio Player</title>

<link rel="manifest" href="manifest.json">
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

<style>
  .btn-border {
    border: solid 1px #888;
  }
</style>

</head>
<body class="bg-gray-100 text-gray-900">
  <div class="max-w-sm mx-auto p-2">
    <div class="flex flex-wrap gap-1">
      <button onclick="handleBookButtonClick()" class="mb-4 px-2 py-2 bg-blue-500 text-white rounded">Books</button>

      <button onclick="refreshBooks()" class="mb-4 px-2 py-2 bg-blue-500 text-white rounded">Refresh</button>
      
      <button onclick="handleRecentButtonClick()" class="mb-4 px-2 py-2 bg-blue-500 text-white rounded">Recent</button>
      
      <button onclick="selectBookRoot()" id="bookRootTrigger" class="mb-4 px-4 py-2 bg-blue-500 text-white rounded hidden">Select</button>
      
      <button onclick="addBookmark()" class="mb-4 px-2 py-2 bg-blue-500 text-white rounded flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="20" height="20">
          <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
        </svg>
      </button>

      <button onclick="openBookmarksOverlay()" class="mb-4 px-2 py-2 bg-blue-500 text-white rounded">Bookmarks</button>
    </div>

    <img onclick="togglePlay()" id="cover" src="" alt="Cover" class="w-full rounded-2xl shadow mb-4 hidden">
    
    <audio id="audio" preload="metadata"></audio>

    <div class="flex items-center justify-center mb-2 text-sm">
      <button id="trackTitle" class="text-blue-600 underline"></button>
    </div>

    <div id="timeInf" class="flex items-center justify-center mb-2 text-sm hidden">
      <span id="currentTime">0:00</span>&nbsp;| remaining:&nbsp;<span id="remainingTime">0:00</span>&nbsp;| total:&nbsp;<span id="bookTotalTime">--:--</span>
    </div>

    <div id="bookList" class="fixed inset-0 bg-white z-50 overflow-auto hidden">
      <div class="p-4">
        <h2 class="text-lg font-semibold mb-4">Select Audio Book</h2>
        <ul id="bookListItems" class="divide-y divide-gray-200"></ul>
        <button onclick="toggleBookList(true)" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded">Close</button>
      </div>
    </div>

    <!-- Recent Overlay Panel -->
    <div id="bookListRecent" class="fixed inset-0 bg-white z-50 overflow-auto hidden">
      <div class="p-4">
        <h2 class="text-lg font-semibold mb-4">Recent Audio Books</h2>
        <ul id="bookListItemsRecent" class="divide-y divide-gray-200"></ul>
        <button onclick="toggleBookListRecent(true)" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded">Close</button>
      </div>
    </div>

    <!-- Bookmarks Overlay Panel -->
    <div id="bookmarksOverlay" class="hidden fixed top-0 left-0 w-full h-full bg-white z-50 p-4 overflow-auto">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold">Bookmarks</h2>
        <button onclick="toggleBookmarksOverlay(true)" class="text-red-600 text-lg">Close</button>
      </div>
      <ul id="bookmarksList" class="space-y-2"></ul>
    </div>

    <div id="chapterList" class="fixed inset-0 bg-white z-50 overflow-auto hidden">
      <div class="p-4">
        <h2 class="text-lg font-semibold mb-4">Select Chapter</h2>
        <ul id="chapterListItems" class="divide-y divide-gray-200"></ul>
        <button onclick="toggleChapterList(true)" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded">Close</button>
      </div>
    </div>

    <div id="transCon" class="flex items-center justify-center space-x-2 flex-nowrap hidden">
      <button onclick="prevTrack()" class="p-2 w-10 bg-gray-200 rounded btn-border">&lt;</button>
      <button onclick="skipTime(-60)" class="p-2 bg-gray-200 rounded btn-border">-1m</button>
      <button onclick="skipTime(-10)" class="p-2 bg-gray-200 rounded btn-border">-10s</button>
      <button onclick="togglePlay()" id="playPause" class="p-2 w-16 bg-blue-500 text-white rounded">play</button>
      <button onclick="skipTime(10)" class="p-2 bg-gray-200 rounded btn-border">+10s</button>
      <button onclick="skipTime(60)" class="p-2 bg-gray-200 rounded btn-border">+1m</button>
      <button onclick="nextTrack()" class="p-2 w-10 bg-gray-200 rounded btn-border">&gt;</button>
    </div>
  </div>

  <!-- <script src="db.js"></script> -->
  <script src="app.js"></script>
</body>
</html>